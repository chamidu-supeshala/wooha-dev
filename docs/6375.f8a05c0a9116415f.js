"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6375],{6375:(rt,x,r)=>{r.r(x),r.d(x,{ProductDetailBiddingPageModule:()=>ot});var c=r(177),u=r(5933),E=r(9417),m=r(46),P=r(467),b=r(8705),l=r(6977),w=r(3207),h=r(5643),t=r(4438),B=r(9176),f=r(3303),I=r(3675),$=r(6429);let R=(()=>{var e;class d extends h.${constructor(){super()}ngOnInit(){}}return(e=d).\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["app-bid-button"]],features:[t.Vt3],decls:2,vars:0,consts:[[1,"bid-button"]],template:function(n,i){1&n&&(t.j41(0,"button",0),t.EFF(1," Bid now "),t.k0s())},styles:['[_nghost-%COMP%]{display:contents}button.bid-button[_ngcontent-%COMP%]{border:1px solid black;margin-bottom:11px;display:inline-block;position:relative;height:2.75rem;width:100%;border-radius:.5rem;background-color:var(--main-yellow);font-size:1.25rem;line-height:1.75rem;font-weight:700;text-transform:capitalize;--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity));transition:transform .15s cubic-bezier(0,0,.58,1);transform-style:preserve-3d}button.bid-button[_ngcontent-%COMP%]:before{content:"";background-color:#c87105;border:1px solid #94612F;transition:transform .15s cubic-bezier(0,0,.58,1);transform:translate3d(0,12px,-24px);position:absolute;top:0;right:0;bottom:0;left:0;height:100%;width:100%;border-radius:.5rem}button.bid-button[_ngcontent-%COMP%]   .glow-container[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;align-items:center;justify-content:center;border-radius:.5rem}button.bid-button[_ngcontent-%COMP%]:hover{transform:translateY(4px)}button.bid-button[_ngcontent-%COMP%]:hover:before{transform:translate3d(0,6px,-24px)}button.bid-button[_ngcontent-%COMP%]:active{transform:translateY(6px)}button.bid-button[_ngcontent-%COMP%]:active:before{transform:translateZ(-24px)}']}),d})();var T=r(1447),C=r(184),D=r(2135),F=r(3726),A=r(152),S=r(1584),O=function(e){return e[e.OPEN=0]="OPEN",e[e.DRAWN=1]="DRAWN",e[e.DRAWING=2]="DRAWING",e[e.NOT_STARTED=3]="NOT_STARTED",e[e.EXPIRED=4]="EXPIRED",e[e.PAUSED=5]="PAUSED",e[e.WON=6]="WON",e[e.DRAWING_START_SOON=10]="DRAWING_START_SOON",e[e.LOADING_NEXT_POOL=100]="LOADING_NEXT_POOL",e[e.ALL=-1]="ALL",e}(O||{}),G=r(3215),L=r(1413),v=r(1172);let Y=(()=>{var e;class d{constructor(n){this.el=n,this.onDestroy$=new L.B,this.content=n}ngAfterViewInit(){var n=this;return(0,P.A)(function*(){var i;const s=n.content.nativeElement;n.shadowTop=document.createElement("div"),n.shadowBottom=document.createElement("div"),n.shadowTop.classList.add("scroll-shadow-top","absolute","w-full","left-0","top-0","z-10"),n.shadowBottom.classList.add("scroll-shadow-bottom","absolute","w-full","left-0","bottom-0","z-10"),s.append(n.shadowTop),s.append(n.shadowBottom);const a=null===(i=n.content)||void 0===i||null===(i=i.nativeElement)||void 0===i?void 0:i.querySelector(".ng-scroll-viewport");a&&n.renderBoxShadow(a),n.content.scrolled.pipe((0,l.Q)(n.onDestroy$)).subscribe(p=>{n.renderBoxShadow(p.target)}),n.content.updated.pipe((0,l.Q)(n.onDestroy$)).subscribe(p=>{const g=n.content.nativeElement.querySelector(".ng-scroll-viewport");n.renderBoxShadow(g)})})()}renderBoxShadow(n){const i=n.scrollHeight,s=n.offsetHeight;this.shadowTop.style.boxShadow=`0px 0px ${s/25}px ${Math.min(s/30,n.scrollTop/5)}px var(--scroll-shadow-color)`,this.shadowBottom.style.boxShadow=`0px 0px ${s/25}px ${Math.min(s/30,(i-(n.scrollTop+n.offsetHeight))/5)}px var(--scroll-shadow-color)`}ngOnDestroy(){this.onDestroy$.next(!0),this.onDestroy$.complete()}}return(e=d).\u0275fac=function(n){return new(n||e)(t.rXU(v.Yh))},e.\u0275dir=t.FsC({type:e,selectors:[["","scrollShadow",""]]}),d})();var M=r(1661);const U=()=>[1,2,3,4,5,6];function X(e,d){if(1&e&&(t.j41(0,"div",6),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&e){const o=t.XpG();t.AVh("my-3",!o.entries.length||!o.isMobile&&o.total>5&&o.pageParams.page+1==o.numOfPages),t.R7$(),t.SpI(" ",t.bMT(2,3,o.entries.length>0?!o.isMobile&&o.total>5&&o.pageParams.page+1==o.numOfPages?"no-more-entries":"":"no-entries-found")," ")}}function k(e,d){1&e&&(t.j41(0,"p"),t.nrm(1,"ion-skeleton-text",10),t.k0s()),2&e&&(t.R7$(),t.Y8G("animated",!0))}function _(e,d){1&e&&(t.j41(0,"div",8),t.DNE(1,k,2,1,"p",9),t.k0s()),2&e&&(t.R7$(),t.Y8G("ngForOf",t.lJ4(1,U)))}function V(e,d){if(1&e&&t.DNE(0,_,2,2,"div",7),2&e){const o=t.XpG();t.Y8G("ngIf",!o.pageLoaded)}}function W(e,d){1&e&&t.nrm(0,"div",11)}let z=(()=>{var e;class d extends h.${constructor(n,i,s){super(),this.biddingService=n,this.userService=i,this.cdr=s,this.poolStatus=O,this.entries=[],this.pageParams={page:0,rows:10,onlyShowMyself:!1,groupBuyingId:0},this.total=0,this.numOfPages=1,this.pageLoaded=!1,this.selectedPool=this.biddingService.selectedPool$.getValue(),this.isMobile=!1}ngOnInit(){this.biddingService.selectedPool$.pipe((0,l.Q)(this.onDestroy$)).subscribe(n=>{var i;(null===(i=this.selectedPool)||void 0===i?void 0:i.poolId)!=(null==n?void 0:n.poolId)&&(this.entries=[],this.pageLoaded=!1),this.selectedPool=n,this.initContent()})}ngAfterViewInit(){b.A.isBrowser&&(this.isMobile=window.innerWidth<768,(0,F.R)(window,"resize").pipe((0,l.Q)(this.onDestroy$),(0,A.B)(100)).subscribe(n=>{this.isMobile=n.target.innerWidth<768,this.initContent()}))}initContent(){var n;if(this.subscription&&this.subscription.unsubscribe(),null===(n=this.selectedPool)||void 0===n||!n.poolId)return this.pageParams.page=0,this.total=0,this.numOfPages=1,this.pageLoaded=!0,void(this.entries=[]);this.total||(this.pageLoaded=!1),this.pageParams={page:0,rows:this.isMobile?5:10,onlyShowMyself:this.pageParams.onlyShowMyself,groupBuyingId:parseInt(this.selectedPool.poolId)},this.getBiddingEntries(0),this.initPollSelectedPoolEntries()}initPollSelectedPoolEntries(){b.A.isBrowser&&(this.stopPoll(),this.subscription=(0,S.O)(6e3,6e3).pipe((0,l.Q)(this.onDestroy$)).subscribe(()=>{this.getBiddingEntries(this.pageParams.page)}))}stopPoll(){this.subscription&&this.subscription.unsubscribe()}getBiddingEntries(n){this.biddingService.getPoolEntriesForProduct({...this.pageParams,page:n}).pipe((0,l.Q)(this.onDestroy$)).subscribe(i=>{var s;this.entries=((null==i?void 0:i.rows)||[]).map(a=>{var p;return{...a,userId:a.membersId,userName:a.membersName,avatar:null!==(p=a.membersAvatar)&&void 0!==p?p:"assets/images/sign-up-user.svg",avatarFrame:a.memberAvatarFrame,tickets:a.ticketsAmount,date:a.lastModifiedDate,maskedUserId:this.getMaskedUsername(a.membersName),entries:a.entries.slice(0,10).map(g=>({ticketId:g.ticketsId.substring(2,g.ticketsId.length),date:g.time})),isWinner:a.isWinner,entriesVisible:!1}}),this.pageParams.page=n,this.total=null!==(s=null==i?void 0:i.total)&&void 0!==s?s:0,this.numOfPages=Math.ceil(this.total/this.pageParams.rows),this.pageLoaded=!0,this.cdr.detectChanges()})}getMaskedUsername(n){var i;return null!==(i=n.replace(n.substring(2,n.length-2),"***"))&&void 0!==i?i:"**"}identify(n,i){return i.membersName+i.createdDate}}return(e=d).\u0275fac=function(n){return new(n||e)(t.rXU(f.R),t.rXU(G.D),t.rXU(t.gRc))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-product-pool-entries"]],inputs:{product:"product"},features:[t.Vt3],decls:7,vars:3,consts:[["notLoaded",""],[1,"w-full","bg-panel-3","border","border-main-border","rounded-3xl"],["visibility","hover","scrollShadow","","backToTopBtnNgScroll","",1,"w-full"],[1,"entries","w-full","flex","flex-col"],["class","w-full text-center text-gray-400 flex-1 flex justify-center items-center",3,"my-3",4,"ngIf","ngIfElse"],["class","px-4 pt-2 pb-3 md:my-4 md:mt-2",4,"ngIf"],[1,"w-full","text-center","text-gray-400","flex-1","flex","justify-center","items-center"],["class","w-full text-center mt-1 text-gray-400",4,"ngIf"],[1,"w-full","text-center","mt-1","text-gray-400"],[4,"ngFor","ngForOf"],[1,"w-full","mx-2",3,"animated"],[1,"px-4","pt-2","pb-3","md:my-4","md:mt-2"]],template:function(n,i){if(1&n&&(t.j41(0,"div",1)(1,"ng-scrollbar",2)(2,"div",3),t.DNE(3,X,3,5,"div",4)(4,V,1,1,"ng-template",null,0,t.C5r),t.k0s(),t.DNE(6,W,1,0,"div",5),t.k0s()()),2&n){const s=t.sdS(5);t.R7$(3),t.Y8G("ngIf",i.pageLoaded)("ngIfElse",s),t.R7$(3),t.Y8G("ngIf",i.numOfPages>1)}},dependencies:[c.Sq,c.bT,u.ds,Y,v.Yh,M.D9],styles:["ion-skeleton-text[_ngcontent-%COMP%]{height:24px}.entries[_ngcontent-%COMP%]{min-height:100px}ng-scrollbar[_ngcontent-%COMP%]     .ng-scroll-content{min-height:100px}@media (max-width: 767.9px){ng-scrollbar[_ngcontent-%COMP%]   .ng-scrollbar-wrapper[_ngcontent-%COMP%]{position:static!important}ng-scrollbar[_ngcontent-%COMP%]   .ng-scrollbar-wrapper[_ngcontent-%COMP%]   .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]{position:static!important}ng-scrollbar[_ngcontent-%COMP%]   .ng-scrollbar-wrapper[_ngcontent-%COMP%]   .ng-scroll-viewport-wrapper[_ngcontent-%COMP%]   .ng-scroll-viewport[_ngcontent-%COMP%]{position:static!important;contain:content!important}}@media (min-width: 768px){ng-scrollbar[_ngcontent-%COMP%]{max-height:104px;min-height:104px}}.last-entry[_ngcontent-%COMP%]     .entry{border-bottom-width:1px;--tw-border-opacity: 1;border-color:rgb(226 232 240 / var(--tw-border-opacity))}"],changeDetection:0}),d})();const H=e=>({page:0,rows:15,isRecommended:!0,productCategoryId:e});function Q(e,d){if(1&e&&(t.j41(0,"div",17),t.EFF(1),t.k0s()),2&e){const o=t.XpG(2);t.R7$(),t.JRh(o.brand.name)}}function J(e,d){if(1&e&&(t.j41(0,"div",1),t.nrm(1,"app-product-images",2),t.j41(2,"div",3)(3,"div",4),t.DNE(4,Q,2,1,"div",5),t.j41(5,"div",6),t.EFF(6),t.k0s(),t.j41(7,"div",7),t.EFF(8,"Specification || Specification || Specification"),t.k0s()(),t.j41(9,"div",8),t.nrm(10,"app-bidding-progress-bar",9),t.j41(11,"span",10),t.EFF(12,"Pool is filling up"),t.k0s()(),t.j41(13,"div",11)(14,"div",12),t.nrm(15,"app-product-pool-entries",13),t.k0s(),t.nrm(16,"app-bid-button",14),t.k0s(),t.j41(17,"div",15),t.nrm(18,"app-product-slides",16),t.k0s()()()),2&e){const o=t.XpG();t.R7$(),t.Y8G("productDetail",o.productDetail),t.R7$(3),t.Y8G("ngIf",o.brand),t.R7$(2),t.JRh(o.productDetail.name),t.R7$(4),t.Y8G("currentPoolPercentage",25),t.R7$(5),t.Y8G("product",o.productDetail),t.R7$(3),t.Y8G("bidParams",t.eq3(6,H,o.productDetail.productCategoryId))}}let Z=(()=>{var e;class d extends h.${constructor(n){super(),this.biddingService=n,this.slideOpts={slidesPerView:"auto",speed:400,spaceBetween:10,autoplay:{delay:2e3,disableOnInteraction:!1,pauseOnMouseEnter:!0},noSwiping:!0,noSwipingClass:"bidding-bar"}}ngOnInit(){}}return(e=d).\u0275fac=function(n){return new(n||e)(t.rXU(f.R))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-product-detail-bidding-pane"]],inputs:{productDetail:"productDetail",brand:"brand"},features:[t.Vt3],decls:1,vars:1,consts:[["class","flex flex-col md:flex-row gap-4 3xl:gap-6",4,"ngIf"],[1,"flex","flex-col","md:flex-row","gap-4","3xl:gap-6"],[1,"block","w-full","flex-1",3,"productDetail"],[1,"product-wrapper","w-full"],[1,"product-header","flex","flex-col"],["class","brand text-gray-4 text-sm font-bold mb-1",4,"ngIf"],[1,"product-name","font-medium","text-4xl"],[1,"product-specification","font-medium","text-2xl","mt-0.5"],[1,"mt-4","relative"],[1,"selected-pool-progress",3,"currentPoolPercentage"],[1,"animated-elipsis","pool-filling-up","text-lg","md:text-3xl","font-medium","pr-2","absolute","top-0","left-0","right-0","bottom-0","flex","justify-center","items-center","text-white"],[1,"mt-5","flex","gap-2","md:gap-4"],[1,"flex-1"],[3,"product"],[1,"!block"],[1,"mt-3","products-slider-container","max-w-full","pl-2","pr-2","3xl:pr-0"],[1,"block",3,"bidParams"],[1,"brand","text-gray-4","text-sm","font-bold","mb-1"]],template:function(n,i){1&n&&t.DNE(0,J,19,8,"div",0),2&n&&t.Y8G("ngIf",i.productDetail)},dependencies:[c.bT,R,T.T,C.b,D.J,z],styles:["app-product-images[_ngcontent-%COMP%]{filter:drop-shadow(0px 0px 7px rgba(0,0,0,.02))}@media (min-width: 768px){app-product-images[_ngcontent-%COMP%]{max-width:40%}}.product-wrapper[_ngcontent-%COMP%]{max-width:100%}@media (min-width: 768px){.product-wrapper[_ngcontent-%COMP%]{max-width:60%}}.product-specification[_ngcontent-%COMP%]{color:#4822ff}app-bidding-progress-bar.selected-pool-progress[_ngcontent-%COMP%]     .progress-bar{height:60px;border-radius:.5rem}app-bidding-progress-bar.selected-pool-progress[_ngcontent-%COMP%]     .progress-bar .progress{border-radius:.5rem;border-top-right-radius:0;border-bottom-right-radius:0}app-bid-button[_ngcontent-%COMP%]     .bid-button{height:70px!important;font-size:30px!important;border-radius:18px!important}app-bid-button[_ngcontent-%COMP%]     .bid-button:before{border-radius:18px!important}app-bid-button[_ngcontent-%COMP%]     .bid-button .glow-container{padding-left:1.75rem;padding-right:1.75rem}@media (min-width: 1600px){app-bid-button[_ngcontent-%COMP%]     .bid-button{height:85px!important;font-size:36px!important}app-bid-button[_ngcontent-%COMP%]     .bid-button .glow-container{padding-left:2rem;padding-right:2rem}}app-product-slides[_ngcontent-%COMP%]     .swiper .swiper-slide{width:50%;max-width:222px;flex-shrink:0;padding-left:.75rem;padding-right:.75rem;padding-top:1.25rem}@media (min-width: 768px){app-product-slides[_ngcontent-%COMP%]     .swiper .swiper-slide{padding-left:1.25rem;padding-right:1.25rem}}@media (min-width: 340px){app-product-slides[_ngcontent-%COMP%]     .swiper .swiper-slide{width:33.3333333333%}}@media (min-width: 640px){app-product-slides[_ngcontent-%COMP%]     .swiper .swiper-slide{width:33.3333333333%}}@media (min-width: 768px){app-product-slides[_ngcontent-%COMP%]     .swiper .swiper-slide{width:33.3333333333%}}@media (min-width: 1024px){app-product-slides[_ngcontent-%COMP%]     .swiper .swiper-slide{width:33.3333333333%}}@media (min-width: 1256px){app-product-slides[_ngcontent-%COMP%]     .swiper .swiper-slide{width:25%}}@media (min-width: 1600px){app-product-slides[_ngcontent-%COMP%]     .swiper .swiper-slide{width:20%}}app-product-slides[_ngcontent-%COMP%]     .swiper .swiper-slide app-bid-button .bid-button{font-size:22px;height:50px}app-product-slides[_ngcontent-%COMP%]     .swiper .swiper-slide app-bid-button .bid-button:before{border-radius:10px!important}app-product-pool-entries[_ngcontent-%COMP%]{filter:drop-shadow(0px 0px 7px rgba(0,0,0,.05))}"]}),d})();const K=[{path:":id",component:(()=>{var e;class d extends h.${constructor(n,i,s){super(),this.route=n,this.productsService=i,this.biddingService=s,this.quantity=1}ngOnInit(){this.route.paramMap.pipe((0,l.Q)(this.onDestroy$)).subscribe(n=>{const i=n.get("id");i&&this.getProductInfo(i)})}getProductInfo(n){var i=this;return(0,P.A)(function*(){i.productDetail=yield(0,w.s)(i.biddingService.getProductById(n)),i.productDetail&&(i.quantity=1,b.A.isServer||(i.brand=yield(0,w.s)(i.productsService.getBrandById(i.productDetail.brandId))))})()}}return(e=d).\u0275fac=function(n){return new(n||e)(t.rXU(m.nX),t.rXU(B.g),t.rXU(f.R))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-product-detail-bidding-page"]],features:[t.Vt3],decls:17,vars:5,consts:[["ionContent",""],[3,"scrollEvents","fullscreen"],[3,"hideHeader"],[1,"page-container","pt-2","md:pt-4"],[3,"productDetail","brand"],[1,"w-full","ribbon","border","border-main-border","bg-contrast-strong","px-2","my-5"],[1,"page-container"],[1,"py-3.5","flex","gap-2","items-center","justify-between","max-w-6xl"],[1,"tab-header","text-2xl","md:text-3xl","font-medium"],[1,"page-container","flex","gap-4","items-start","hidden"],[1,"categories","w-1/6","border","border-main-border","bg-contrast-strong","p-2","rounded-xl"],[1,"description","border","border-main-border","bg-contrast-strong","p-2","rounded-xl","flex-1"]],template:function(n,i){if(1&n&&(t.j41(0,"ion-content",1,0),t.nrm(2,"app-header",2),t.j41(3,"div",3),t.nrm(4,"app-product-detail-bidding-pane",4),t.k0s(),t.j41(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),t.EFF(9,"Back to Top"),t.k0s(),t.j41(10,"div",8),t.EFF(11,"Description"),t.k0s(),t.j41(12,"div",8),t.EFF(13,"Recommended"),t.k0s()()()(),t.j41(14,"div",9),t.nrm(15,"div",10)(16,"div",11),t.k0s()()),2&n){const s=t.sdS(1);t.Y8G("scrollEvents",!0)("fullscreen",!0),t.R7$(2),t.Y8G("hideHeader",s),t.R7$(2),t.Y8G("productDetail",i.productDetail)("brand",i.brand)}},dependencies:[u.W9,I.l,$.$,Z],styles:["ion-content[_ngcontent-%COMP%]::part(background){background:linear-gradient(120deg,#f8f8f0,#e3f1ff,#fbd5f7)}@media (min-width: 1600px){app-product-detail-pane[_ngcontent-%COMP%]     app-product-slides{margin-right:calc((100vw - 1332px)/-2)}}.categories[_ngcontent-%COMP%]{max-width:200px}"]}),d})()}];let q=(()=>{var e;class d{}return(e=d).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[m.iI.forChild(K),m.iI]}),d})();var tt=r(7997),y=r(4639),et=r(7456),nt=r(6007);let it=(()=>{var e;class d{}return(e=d).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[M.h,c.MD,u.bv,m.iI,y.v,nt.t,C.b,v.Id,D.J]}),d})(),ot=(()=>{var e;class d{}return(e=d).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[c.MD,E.YN,u.bv,q,tt.R,y.v,et.vj,it]}),d})()}}]);